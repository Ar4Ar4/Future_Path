<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FuturePath | Register</title>
   <link rel="stylesheet" th:href="@{/css/common.css}" />
  <link rel="stylesheet" th:href="@{/css/login.css}" />
  <link rel="stylesheet" th:href="@{/css/dropdown.css}" />
   <link rel="icon" type="image/x-icon" th:href="@{favicon.ico}" />  
</head>

<body>
  <main class="wrapper">
    <header class="header">
      <nav>
        <div class="nav-left">
          <a href="#" class="logo">
            <img th:src="@{/images/logo.png}" alt="logo" class="logo-icon">
            <div class="logo-text">
              <h5>FuturePath</h5>
              <p>A capstone project</p>
            </div>
          </a>
        </div>
        <div class="nav-right">
          <a th:href="@{/login}" class="btn-primary">Sign In</a>
        </div>
      </nav>
    </header>
    <hr>

    <div class="background">
      <img src="../assets/img/team.jpg" alt="background">
    </div>

    <div class="main-container">
      <form th:action="@{/register}" method="POST" class="form login-card">
        <h5 class="welcome">We are FUTUREPATH</h5>
        <h3>Sign up with us</h3>

        <div class="form-group">
          
            <div class="field">
			  <label>FIRST NAME</label>  
			  <div class="input-wrapper">
			    <i class="fas fa-user"></i>
			    <input type="text" placeholder="Enter first name" name="firstName" class="required" />
			  </div>
			</div>
			
			<div class="field">
			  <label>LAST NAME</label>  
			  <div class="input-wrapper">
			    <i class="fas fa-user"></i>
			    <input type="text" placeholder="Enter last name" name="lastName" class="required"/>
			  </div>
			</div>
			
			<div class="field">
			  <label>EMAIL</label>  
			  <div class="input-wrapper">
			    <i class="fas fa-envelope"></i>
			    <input type="email" placeholder="Enter email address" name="email" class="required"/>
			  </div>
			</div>
			
			<div class="field">
			  <label>PHONE</label>  
			  <div class="input-wrapper">
			    <i class="fas fa-phone"></i>
			    <input type="text" placeholder="Enter phone number" name="phone" class="required"/>
			  </div>
			</div>
			
			<div class="field">
			  <label>GENDER</label>  
			  <div class="input-wrapper">
			    <i class="fas fa-venus-mars"></i>
			    <select name="gender" class="required dropdown">
			      <option value="">SELECT GENDER</option>
			      <option value="Male">Male</option>
			      <option value="Female">Female</option>
			      <option value="Other">Other</option>
			    </select>
			  </div>
			</div>
			
			<div class="field">
			  <label>USERNAME</label>  
			  <div class="input-wrapper">
			    <i class="fas fa-user-circle"></i>
			    <input type="text" placeholder="Enter username" name="username" class="required"/>
			  </div>
			</div>
			
			<div class="field">
			  <label>PASSWORD</label>  
			  <div class="input-wrapper">
			    <i class="fas fa-lock"></i>
			    <input type="password" placeholder="Enter password" name="password" class="required"/>
			  </div>
			</div>
			
			<div class="field">
			  <label>CONFIRM PASSWORD</label>  
			  <div class="input-wrapper">
			    <i class="fas fa-lock"></i>
			    <input type="password" placeholder="Confirm password" name="confirmPassword" class="required"/>
			  </div>
			</div>

		  

        </div>

        <button class="btn-primary full transitioning">Sign In â†’</button>

        <p class="signup">
          Already have an account? <a th:href="@{/login}" class="transitioning">Sign In</a> here.
        </p>
      </form>
    </div>
	<hr>
    <footer class="footer">
      <p>All rights reserved by <a href="#">FuturePath</a></p>
      <div class="footer-links">
        <a href="#">Terms of use</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Contact us</a>
      </div>
    </footer>
    <!-- Unfilled Fields Modal -->
         <div id="unfilledModal" class="themed-modal-overlay">
            <div class="themed-modal-box">
               <h3>Missing Information</h3>
               <p>Please fill out all required fields before registering.</p>
               <div class="themed-modal-actions">
                  <button class="modal-btn" onclick="closeUnfilledModal()">OK</button>
               </div>
            </div>
         </div>
         <div id="inUseModal" class="themed-modal-overlay" style="display: flex;" th:if="${isError}">
		    <div class="themed-modal-box">
		        <h3>Username Already Exists</h3>
		        <p>The username you entered is already in use. Please choose a different username.</p>
		        <div class="themed-modal-actions">
		            <button class="modal-btn" onclick="closeInUseModal()">OK</button>
		        </div>
		    </div>
		</div>
  </main> 
  <script th:src="@{/script/loading.js}"></script>
  <script th:src="@{/script/dropdown.js}"></script>
  <script>
         function openUnfilledModal() {
             document.getElementById("unfilledModal").style.display = "flex";
         }
         
         function closeUnfilledModal() {
             document.getElementById("unfilledModal").style.display = "none";
         }
         function closeInUseModal() {
             document.getElementById("inUseModal").style.display = "none";
         }
         
         document.addEventListener("DOMContentLoaded", () => {
             const form = document.querySelector(".form");
         
             form.addEventListener("submit", function(e) {
                 let emptyFound = false;
         
                 // Only check text inputs inside .field
                 form.querySelectorAll(".required").forEach(input => {
                     if (!input.value.trim()) emptyFound = true;
                 });
         
                 // Check underlying selects (custom dropdown)
                 form.querySelectorAll(".required").forEach(select => {
                     if (!select.value) emptyFound = true;  // works with placeholder value=""
                 });
         
                 if (emptyFound) {
                     e.preventDefault();
                     openUnfilledModal();
                     removeLoadingScreenBody();
                 }
             });
         });
         
         
      </script>
</body>
</html>
